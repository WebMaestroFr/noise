(this.webpackJsonpnoise=this.webpackJsonpnoise||[]).push([[0],{103:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),i=n.n(r),s=(n(103),n(11)),u=n(7),o=n(18),l=n(46),b=n(4),j=["onUpdate"],d=function(e){var t=e.onUpdate,n=Object(o.a)(e,j),c=function(e){var t=Object(a.useRef)(null),n=Object(a.useCallback)((function(){var e=t.current;return e?e.getContext("2d"):null}),[]);return Object(a.useEffect)((function(){var t,a=n(),c=0;return function n(){c++,a&&e&&e(a,c),t=window.requestAnimationFrame(n)}(),function(){window.cancelAnimationFrame(t)}}),[n,e]),t}(t);return Object(b.jsx)("canvas",Object(u.a)({ref:c},n))},O={noise:{layers:[{scale:12,speed:.2,seed:"1"},{scale:24,speed:.2,seed:"2"},{scale:96,speed:.2,seed:"3"}],resolution:1/4,range:[-1,1]}},f=Object(a.createContext)(O),h=function(){return Object(a.useContext)(f)},m=["width","height"];function v(e){var t=(e+1)/2,n=Math.round(255*t);return[n,n,n,255]}var p=function(e){var t=e.width,n=e.height,c=Object(o.a)(e,m),r=h().noise,i=r.layers,j=r.range,O=r.resolution,f=Math.round(t*O),p=Math.round(n*O),x=function(e,t){var n=Object(a.useMemo)((function(){return new ImageData(e,t)}),[e,t]);return Object(a.useCallback)((function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=e.map((function(e){var t=e.seed;return new l.a(t)})),r=function(e){return e<=t[0]?-1:e>=t[1]?1:(e-t[0])/(t[1]-t[0])*2-1},i=function(t){for(var i=function(i){var u=e.reduce((function(n,r,s){var u=r.scale,o=r.speed;return n+c[s].noise3D(t/u,i/u,a*o)/e.length}),0),o=v(r(u)),l=Object(s.a)(o,4),b=l[0],j=l[1],d=l[2],O=l[3],f=i*(4*n.width)+4*t;n.data[f+0]=b,n.data[f+1]=j,n.data[f+2]=d,n.data[f+3]=O},u=0;u<n.height;u+=1)i(u)},u=0;u<n.width;u+=1)i(u);return n}),[n])}(f,p),g=Object(a.useCallback)((function(e){var t=Date.now()/1e3,n=x(i,j,t);e.putImageData(n,0,0)}),[x,i,j]);return Object(b.jsx)(d,Object(u.a)({className:"Noise",onUpdate:g,width:f,height:p,style:{width:t,height:n}},c))},x=n(14),g=n(133),N=function(e,t){var n=t.min,a=t.max,c=t.step;return n&&(e<n||isNaN(e))?n:a&&(e>a||isNaN(e))?a:isNaN(e)?0:c&&e%c!==0?Math.round(e/c)*c:e},w=function(e){var t=e.onUpdate,n=e.settings,c=n.layers,r=n.range,i=n.resolution,s=Object(a.useCallback)((function(e,n){return function(a){var c=N(a,n);t((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(x.a)({},e,c))}))}}),[t]),o=Object(a.useCallback)((function(e,n){return function(a){var c=a.currentTarget.value;t((function(t){return t.layers[e]=Object(u.a)(Object(u.a)({},t.layers[e]),{},Object(x.a)({},n,c)),Object(u.a)({},t)}))}}),[t]),l=Object(a.useCallback)((function(e,n,a){return function(c){var r=N(c,a);t((function(t){return t.layers[e]=Object(u.a)(Object(u.a)({},t.layers[e]),{},Object(x.a)({},n,r)),Object(u.a)({},t)}))}}),[t]),j=Object(a.useCallback)((function(e,n){return function(a){var c=a.map((function(e){return N(e,n)}));t((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(x.a)({},e,c))}))}}),[t]),d=Object(a.useCallback)((function(){t((function(e){return e.layers.push({scale:50,seed:"",speed:.2}),Object(u.a)({},e)}))}),[t]),O=Object(a.useCallback)((function(e){return function(){t((function(t){return t.layers.splice(e,1),Object(u.a)(Object(u.a)({},t),{},{layers:t.layers})}))}}),[t]);return Object(b.jsxs)("form",{className:"NoiseForm",children:[Object(b.jsx)("h1",{children:"Noise"}),c.map((function(e,t){var n=e.scale,a=e.seed,r=e.speed;return Object(b.jsxs)("div",{className:"NoiseForm-layer",children:[Object(b.jsx)(g.b,{className:"NoiseForm-layer-seed",label:"Seed",children:Object(b.jsx)(g.c,{defaultValue:a,fill:!0,onChange:o(t,"seed")})}),Object(b.jsx)(g.b,{className:"NoiseForm-layer-scale",label:"Scale",children:Object(b.jsx)(g.f,{labelStepSize:11,max:100,min:1,onChange:l(t,"scale",{min:1,max:100,step:1}),stepSize:1,value:n})}),Object(b.jsx)(g.b,{className:"NoiseForm-layer-speed",label:"Speed",children:Object(b.jsx)(g.f,{labelStepSize:.2,max:1,min:0,onChange:l(t,"speed",{min:0,max:1,step:.01}),stepSize:.01,value:r})}),Object(b.jsx)(g.a,{onClick:O(t),children:"Remove Layer"})]},"".concat(t,"-").concat(c.length))})),Object(b.jsx)(g.a,{onClick:d,children:"Add Layer"}),Object(b.jsx)("h2",{children:"Settings"}),Object(b.jsx)(g.b,{className:"NoiseForm-resolution",label:"Resolution",children:Object(b.jsx)(g.d,{fill:!0,min:.01,max:1,minorStepSize:null,onValueChange:s("resolution",{min:.01,max:1,step:.01}),stepSize:.01,value:i})}),Object(b.jsx)(g.b,{className:"NoiseForm-range",label:"Range",children:Object(b.jsx)(g.e,{min:-1,max:1,stepSize:.01,labelStepSize:.4,onChange:j("range",{min:-1,max:1,step:.01}),value:r})})]})},C=["children"];var S=function(e){var t=e.children,n=Object(o.a)(e,C),c=function(e,t){var n=Object(a.useState)(e),c=Object(s.a)(n,2),r=c[0],i=c[1],u=Object(a.useState)(e),o=Object(s.a)(u,2),l=o[0],b=o[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){b(r)}),t);return function(){clearTimeout(e)}}),[r,t]),[l,r,i]}(O.noise,200),r=Object(s.a)(c,3),i=r[0],l=r[1],j=r[2];return Object(b.jsxs)(f.Provider,Object(u.a)(Object(u.a)({value:{noise:i}},n),{},{children:[t,Object(b.jsx)("div",{className:"Settings",children:Object(b.jsx)(w,{onUpdate:j,settings:l})})]}))},y=function(){return[window.innerWidth,window.innerHeight]};var k=function(){var e=Object(a.useState)(y),t=Object(s.a)(e,2),n=Object(s.a)(t[0],2),c=n[0],r=n[1],i=t[1],u=Object(a.useCallback)((function(){return i(y)}),[]);return Object(a.useEffect)((function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(S,{children:Object(b.jsx)(p,{width:c,height:r})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),F()}},[[129,1,2]]]);
//# sourceMappingURL=main.9354a72b.chunk.js.map